(this["webpackJsonpimage-finder"]=this["webpackJsonpimage-finder"]||[]).push([[0],{28:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(17),s=a.n(n),c=(a(28),a(5)),r=a.n(c),o=a(8),i=a(7),l=a(4),u=a(18),m=a(19),d=a(23),b=a(22),g=a(0),h=a(1);var j=function(e){var t=e.smallImage,a=e.alt,n=e.id,s=e.onClick;return Object(h.jsx)("li",{className:"ImageGalleryItem",children:Object(h.jsx)("img",{src:t,alt:a,id:n,onClick:s,className:"ImageGalleryItem-image"})})};var p=function(e){var t=e.images;return Object(h.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(g.createElement)(j,Object(l.a)(Object(l.a)({},e),{},{key:e.id}))}))})};var f=function(e){var t=e.onSubmit;return Object(h.jsx)("header",{className:"Searchbar",children:Object(h.jsxs)("form",{className:"SearchForm",onSubmit:t,children:[Object(h.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(h.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(h.jsx)("input",{className:"SearchForm-input",type:"text",autocomplete:"off",autofocus:!0,placeholder:"Search images and photos"})]})})};var O=function(e){var t=e.onMore;return Object(h.jsx)("button",{className:"Button",onClick:t,children:"Load MORE..."})},v=a(20),x=a.n(v);a(51);var S=function(){return Object(h.jsx)(x.a,{type:"Hearts",color:"#e63964",height:100,width:100})};var y=function(e){var t=e.image,a=e.onClose;return Object(h.jsx)("div",{className:"Overlay",onClick:function(e){e.target.attributes.class&&a()},children:Object(h.jsx)("div",{className:"Modal",children:Object(h.jsx)("img",{src:t.bigImage,alt:t.alt})})})},I=a(21),L=a.n(I),k=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s)))._INITIAL_STATE_={images:[],page:0,query:"",maxPages:0,isLoadButton:!1,isLoading:!1,modal:null},e.afterScroll=!1,e.state=Object(l.a)({},e._INITIAL_STATE_),e.closeModal=function(){e.setState({modal:null})},e.scrollUp=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.handelSubmit=function(t){t.preventDefault(),e.setState(Object(l.a)(Object(l.a)({},e._INITIAL_STATE_),{},{query:t.target[1].value.trim().replaceAll(" ","+"),isLoading:!0}))},e.downImages=Object(i.a)(r.a.mark((function t(){var a,n,s,c,i,l,u,m;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.state.query){t.next=3;break}return e.setState({isLoading:!1}),t.abrupt("return");case 3:if(a="21059964-5bf790d712106238e57c2f022",n="https://pixabay.com/api/",s=12,c=e.state.page,!(0===e.state.maxPages||c<e.state.maxPages)){t.next=11;break}c=e.state.page+1,t.next=13;break;case 11:return e.setState({isLoading:!1,isLoadButton:!1}),t.abrupt("return");case 13:return t.prev=13,t.next=16,L()("".concat(n,"?key=").concat(a,"&q=").concat(e.state.query,"&per_page=").concat(s,"&page=").concat(c));case 16:i=t.sent,l=i.data,u=0,m=[],0!==l.total&&(u=Math.ceil(l.totalHits/s),m=l.hits.map((function(t){return{smallImage:t.webformatURL,bigImage:t.largeImageURL,alt:t.tags,id:t.id.toString(),onClick:function(){e.setState({modal:{bigImage:t.largeImageURL,alt:t.tags}})}}}))),e.setState((function(e){return{images:[].concat(Object(o.a)(e.images),Object(o.a)(m)),maxPages:u,page:c,isLoading:!1,isLoadButton:c<u}})),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(13),e.setState({isLoading:!1,isLoadButton:!1});case 27:case"end":return t.stop()}}),t,null,[[13,24]])}))),e._handleEscKey=function(t){e.state.modal&&27===t.keyCode&&e.closeModal()},e.moreImages=Object(i.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.afterScroll=!0,e.setState({isLoading:!0});case 2:case"end":return t.stop()}}),t)}))),e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleEscKey,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleEscKey,!1)}},{key:"componentDidUpdate",value:function(){this.state.isLoading?this.downImages():this.afterScroll&&(this.scrollUp(),this.afterScroll=!1)}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"App",children:[this.state.modal&&Object(h.jsx)(y,{image:this.state.modal,onClose:this.closeModal}),Object(h.jsx)(f,{onSubmit:this.handelSubmit}),Object(h.jsx)(p,{images:this.state.images}),this.state.isLoadButton&&Object(h.jsx)(O,{onMore:this.moreImages}),this.state.isLoading&&Object(h.jsx)(S,{})]})}}]),a}(g.Component);s.a.render(Object(h.jsx)(k,{}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.1da26291.chunk.js.map