(this["webpackJsonpimage-finder"]=this["webpackJsonpimage-finder"]||[]).push([[0],{28:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a.n(n),s=(a(28),a(4)),c=a.n(s),o=a(12),i=a(6),l=a(5),u=a(7),m=a(8),d=a(10),b=a(9),h=a(0),g=a(1);var p=function(e){var t=e.smallImage,a=e.alt,n=(e.id,e.onClick),r=e.bigImage;return Object(g.jsx)("li",{className:"ImageGalleryItem",children:Object(g.jsx)("img",{src:t,alt:a,"data-bigimage":r,"data-alt":a,onClick:n,className:"ImageGalleryItem-image"})})};var j=function(e){var t=e.images,a=e.onClick;return Object(g.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(h.createElement)(p,Object(l.a)(Object(l.a)({},e),{},{onClick:a,key:e.id}))}))})};var f=function(e){var t=e.onSubmit;return Object(g.jsx)("header",{className:"Searchbar",children:Object(g.jsxs)("form",{className:"SearchForm",onSubmit:t,children:[Object(g.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(g.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(g.jsx)("input",{className:"SearchForm-input",type:"text",autocomplete:"off",autofocus:!0,placeholder:"Search images and photos"})]})})};var O=function(e){var t=e.onMore;return Object(g.jsx)("button",{className:"Button",onClick:t,children:"Load MORE..."})},v=a(22),x=a.n(v);a(51);var y=function(){return Object(g.jsx)(x.a,{type:"Hearts",color:"#e63964",height:100,width:100})},k=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._handleEscKey=function(t){27===t.keyCode&&e.props.onClose()},e.handleClick=function(t){t.target.attributes.class&&e.props.onClose()},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleEscKey,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleEscKey,!1)}},{key:"render",value:function(){return Object(g.jsx)("div",{className:"Overlay",onClick:this.handleClick,children:Object(g.jsx)("div",{className:"Modal",children:Object(g.jsx)("img",{src:this.props.image.bigImage,alt:this.props.image.alt})})})}}]),a}(h.Component),S=a(23),I=a.n(S),L=function(){var e=Object(i.a)(c.a.mark((function e(t,a,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I()("".concat("https://pixabay.com/api/","?key=").concat("21059964-5bf790d712106238e57c2f022","&q=").concat(t,"&per_page=").concat(n,"&page=").concat(a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),w=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r)))._INITIAL_STATE_={images:[],page:0,query:"",maxPages:0,isLoadButton:!1,isLoading:!1,modal:null},e.afterScroll=!1,e.state=Object(l.a)({},e._INITIAL_STATE_),e.closeModal=function(){e.setState({modal:null})},e.scrollUp=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.handelSubmit=function(t){t.preventDefault(),e.setState(Object(l.a)(Object(l.a)({},e._INITIAL_STATE_),{},{query:t.target[1].value.trim().replaceAll(" ","+"),isLoading:!0}))},e.handelCicks=function(t){console.log(t),e.setState({modal:{bigImage:t.target.dataset.bigimage,alt:t.target.dataset.alt}})},e.downImages=Object(i.a)(c.a.mark((function t(){var a,n,r,s,i,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.state.query){t.next=3;break}return e.setState({isLoading:!1}),t.abrupt("return");case 3:if(a=12,n=e.state.page,!(0===e.state.maxPages||n<e.state.maxPages)){t.next=9;break}n=e.state.page+1,t.next=11;break;case 9:return e.setState({isLoading:!1,isLoadButton:!1}),t.abrupt("return");case 11:return t.prev=11,t.next=14,L(e.state.query,n,a);case 14:r=t.sent,s=r.data,i=0,l=[],0!==s.total&&(i=Math.ceil(s.totalHits/a),l=s.hits.map((function(e){return{smallImage:e.webformatURL,bigImage:e.largeImageURL,alt:e.tags,id:e.id.toString()}}))),e.setState((function(e){return{images:[].concat(Object(o.a)(e.images),Object(o.a)(l)),maxPages:i,page:n,isLoading:!1,isLoadButton:n<i}})),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(11),e.setState({isLoading:!1,isLoadButton:!1});case 25:case"end":return t.stop()}}),t,null,[[11,22]])}))),e.moreImages=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.afterScroll=!0,e.setState({isLoading:!0});case 2:case"end":return t.stop()}}),t)}))),e}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(){this.state.isLoading?this.downImages():this.afterScroll&&(this.scrollUp(),this.afterScroll=!1)}},{key:"render",value:function(){return Object(g.jsxs)("div",{className:"App",children:[this.state.modal&&Object(g.jsx)(k,{image:this.state.modal,onClose:this.closeModal}),Object(g.jsx)(f,{onSubmit:this.handelSubmit}),Object(g.jsx)(j,{images:this.state.images,onClick:this.handelCicks}),this.state.isLoadButton&&Object(g.jsx)(O,{onMore:this.moreImages}),this.state.isLoading&&Object(g.jsx)(y,{})]})}}]),a}(h.Component);r.a.render(Object(g.jsx)(w,{}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.42677168.chunk.js.map